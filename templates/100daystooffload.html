{% extends "base.html" %}

{% block content %}
<h1>{{ page.title }}</h1>

{{ page.content | safe }}

<div id="percentage">
    <span style="--percentage: {{ page.extra.posts | length }}%">{{ page.extra.posts | length }}%</span>
    <progress value="{{ page.extra.posts | length }}" max="100"></progress>
</div>

<ul id="posts-list">
	{%- for post in page.extra.posts %}
		<li {% if post.journal %}class="journal"{% endif %}>
			<a href="{{ post.url | safe }}">{{ post.title }}</a>
			<p>{{ post.description }}</p>
			<small>
				<time datetime="{{ post.date | date(format='%+') }}">
					{{ post.date | date(format=config.extra.date_format | default(value="%B %d, %Y"), timezone=config.extra.timezone | default(value="UTC"), locale=config.extra.date_locale | default(value="en_US")) }}
				</time>
				{%- if post.journal -%}
					<span> {{ config.extra.separator | default(value="â€¢") }} </span>
					<span>Journal</span>
				{%- endif -%}
			</small>
		</li>
	{%- endfor %}
</ul>

{%- if page.extra.posts | length == 100 -%}
	<script type="text/javascript" defer src="{{ get_url(path='100daystooffload/confetti.js') | safe }}"></script>
	<script type="text/javascript" defer src="{{ get_url(path='100daystooffload/script.js') | safe }}"></script>
{%- endif -%}
{% endblock content %}
