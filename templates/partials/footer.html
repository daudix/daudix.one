{%- set rel_attributes = macros_rel_attributes::rel_attributes() | trim -%}

<footer id="site-footer">
	{%- if config.extra.footer.links %}
		<nav>
			<ul>
				{%- for link in config.extra.footer.links %}
				{%- if link.url is matching('https?://') %}
					<li>
						<a href="{{ link.url }}" rel="{{ rel_attributes }}" class="external{% if link.new %} new{% endif %}">
							{{- link.name -}}
						</a>
					</li>
				{%- else %}
					<li>
						<a href="{{ get_url(path=link.url)}}" class="
							{% if link.new %}
								new
							{% endif %}
							{% if current_url | default(value='/') | trim_end_matches(pat='/') | safe == get_url(path=link.url) | trim_end_matches(pat='/') | safe %}
								active
							{% endif %}">
							{{- link.name -}}
						</a>
					</li>
				{%- endif %}
			{%- endfor %}
			</ul>
		</nav>
	{%- endif %}

	{%- if config.extra.footer.show_copyright %}
		{%- if config.extra.footer.copyright %}
			{{ config.extra.footer.copyright | markdown | safe }}
		{%- else %}
			<p>&copy; {{ config.title }}, {{ now() | date(format="%Y") }}</p>
		{%- endif %}
	{%- endif %}

	{%- if config.extra.source_url and config.extra.footer.show_source %}
		<p>
			<a class="external" href="{{ config.extra.source_url }}" rel="{{ rel_attributes }}">Website source</a>
		</p>
	{%- endif %}

	{%- if config.extra.footer.show_powered_by %}
		<p>
			<small>
				Powered by <a class="link external" href="https://www.getzola.org" rel="{{ rel_attributes }}">Zola</a> and &lt;3
			</small>
		</p>
	{%- endif %}

	{%- if config.extra.footer.show_fediring  %}
		<div id="fediring">
			<a class="link external" href="https://fediring.net">Fediring</a>
			<a id="fediring-previous" class="link" href="https://fediring.net/previous?host={{ config.base_url | replace(from='https://', to='') }}" title="Previous"><i class="icon"></i></a>
			<a id="fediring-random" class="link" href="https://fediring.net/random" title="Random"><i class="icon"></i></a>
			<a id="fediring-next" class="link" href="https://fediring.net/next?host={{ config.base_url | replace(from='https://', to='') }}" title="Next"><i class="icon"></i></a>
		</div>
	{%- endif %}
</footer>
