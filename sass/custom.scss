@import "../themes/duckquill/sass/_variables.scss";

@include theme-variables using ($theme) {
	@if $theme =="dark" {
		// COLORS
		--bg-overlay: linear-gradient(rgb(0 0 0 / 0.9), rgb(0 0 0 / 0.9));
		--shade-color: rgb(0 0 0 / 0.25);
	}

	@else {
		// COLORS
		--bg-overlay: linear-gradient(rgb(255 255 255 / 0.8), rgb(255 255 255 / 0.8));
		--shade-color: rgb(0 0 0 / 0.07);

		// FILTERS
		--printed: contrast(2) brightness(0.75) grayscale(1);
		--drop-shadow: drop-shadow(0 0.08rem 0.1rem rgb(0 0 0 / 0.35)) drop-shadow(0 0.4rem 0.7rem rgb(0 0 0 / 0.18));
	}
}

body {
	background: var(--bg-overlay), url("assets/static.gif"), var(--accent-color);
	background-blend-mode: normal, difference;

	@media (prefers-reduced-motion) {
		background: var(--bg-overlay), url("assets/static-static.gif"), var(--accent-color);
	}
}

blockquote {

	&.edit,
	&.fact {
		border-inline-start: 0.25rem solid var(--fg-muted-5);

		.alert-title {
			color: var(--fg-muted-5);
		}
	}

	&.edit .alert-title .icon {
		--icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16'%3E%3Cpath d='M12.277.832c-.578.008-1.168.23-1.691.754l-9 9A2 2 0 0 0 1 12v3h3c.531 0 1.04-.21 1.414-.586l9-9c1.79-1.789.082-4.39-1.89-4.57-.083-.012-.165-.012-.247-.012M10.5 4.437 11.563 5.5 4.5 12.563 3.438 11.5zm0 0'/%3E%3C/svg%3E");
		-webkit-mask-image: var(--icon);
		mask-image: var(--icon);

	}

	&.fact .alert-title .icon {
		--icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16'%3E%3Cpath d='M9 1a5.98 5.98 0 0 0-4.42 1.938L.664 6.605a2.165 2.165 0 0 0 .496 3.512L3 11.06V12H1c-.55 0-1 .45-1 1s.45 1 1 1h5.17c.41 1.167 1.52 2 2.83 2s2.42-.833 2.83-2H15v-2h-3.17c-.41-1.167-1.52-2-2.83-2s-2.42.833-2.83 2H5V7c0-2.203 1.797-4 4-4h6V1zm1.496 3a.5.5 0 0 0-.414.242l-.645 1.074.86.516.24-.4.834 1.236.828-.559-1.273-1.886a.5.5 0 0 0-.43-.223m-7.34 1.64A6 6 0 0 0 3 7v2.936l-1.387-.71a1.17 1.17 0 0 1-.265-1.89zm5.696.641L7.656 8.238A.503.503 0 0 0 8.082 9h1.355V8h-.46l.73-1.195zm3.89.723-.851.527.293.469h-1.73v1h2.628a.49.49 0 0 0 .438-.258.5.5 0 0 0-.012-.508zM9 12c.547 0 1 .453 1 1s-.453 1-1 1-1-.453-1-1 .453-1 1-1'/%3E%3C/svg%3E");
		-webkit-mask-image: var(--icon);
		mask-image: var(--icon);
	}
}

.drop-shadow {
	filter: var(--drop-shadow);
}

.emoji {
	all: unset;
	display: inline-block;
	vertical-align: middle;
	transition: var(--transition);
	cursor: zoom-in;
	width: 1.5em;
	height: 1.5em;

	&:hover {
		transform: scale(2);
	}
}

.mastodon-embed {
	box-shadow: var(--shadow);
	border-radius: var(--rounded-corner);
	width: 100%;
}

.audio {
	appearance: none;
	transition: var(--transition);
	cursor: pointer;
	box-shadow: var(--edge-highlight);
	border: none;
	border-radius: var(--rounded-corner-small);
	background-color: var(--accent-color-alpha);
	padding: 0.125rem 0.375rem;
	color: var(--accent-color);
	font-weight: bold;
	font-size: var(--font-size-medium);

	&:hover {
		background-color: var(--accent-color);
		color: var(--contrast-color);
	}

	&::after {
		--icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12'%3E%3Cpath d='M7 2v8a.414.414 157.5 0 1-.707.293L4 8H2a1 1 45 0 1-1-1V5a1 1 135 0 1 1-1h2l2.293-2.293A.414.414 22.5 0 1 7 2' style='fill:none;stroke:black;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none'/%3E%3Cpath d='M10.998.01a1 1 0 0 0-.705.283L9 1.586v2.828l2.707-2.707A1 1 0 0 0 10.998.01M9 5v2h2c1.315-.019 1.315-1.981 0-2zm0 2.586v2.828l1.293 1.293a1 1 0 0 0 1.414-1.414z'/%3E%3C/svg%3E");
		-webkit-mask-image: var(--icon);
		display: inline-block;
		opacity: var(--dim-opacity);
		mask-image: var(--icon);
		mask-size: cover;
		transition: var(--transition);
		margin-inline-start: 0.25rem;
		background-color: currentColor;
		width: max(0.75rem, 0.75em);
		height: max(0.75rem, 0.75em);
		content: "";
	}
}

.media-grid,
.media-grid-markdown p {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(12rem, 1fr));
	gap: 0.5rem;

	img,
	video {
		margin: 0;
	}
}

#site-footer {
	nav a[href*="/commissions/"] {
		position: relative;

		&:hover::before {
			transform: rotate(10deg) var(--hover);
			box-shadow: var(--edge-highlight), var(--shadow-raised);
		}

		&::before {
			display: block;
			position: absolute;
			transform: rotate(0deg);
			transition: var(--transition);
			inset-block-start: -0.5rem;
			inset-inline-end: -0.5rem;
			box-shadow: var(--edge-highlight), var(--shadow);
			border-radius: 999px;
			background-color: var(--red-fg);
			padding: 0.25rem 0.3125rem;
			content: "New!";
			color: var(--contrast-color);
			font-size: var(--font-size-x-small);
			line-height: 1;
		}
	}

	#fediring {
		display: flex;
		flex-direction: row;
		justify-content: center;
		gap: 0.25rem;
		margin: 1rem 0;
		font-size: var(--font-size-small);

		.icon {
			transition: var(--transition);
			width: max(0.75rem, 0.75em);
			height: max(0.75rem, 0.75em);
		}

		#fediring-random,
		#fediring-previous,
		#fediring-next {
			border-radius: 999px;
			padding: 0.25rem 0.3125rem;
			line-height: 0;

			.icon {
				vertical-align: -0.5rem;
			}
		}

		#fediring-random .icon {
			--icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12'%3E%3Cpath d='M3 0C1.355 0 0 1.355 0 3v6c0 1.645 1.355 3 3 3h6c1.645 0 3-1.355 3-3V3c0-1.645-1.355-3-3-3zm0 2h6c.571 0 1 .429 1 1v6c0 .571-.429 1-1 1H3c-.571 0-1-.429-1-1V3c0-.571.429-1 1-1m1 1a1 1 0 0 0-1 1 1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1m2 2a1 1 0 0 0-1 1 1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1m2 2a1 1 0 0 0-1 1 1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1'/%3E%3C/svg%3E");
			-webkit-mask-image: var(--icon);
			mask-image: var(--icon);
		}

		#fediring-previous .icon {
			--icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12'%3E%3Cpath d='M11 6H1m4-4L1 6l4 4' style='fill:none;stroke:%23000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round'/%3E%3C/svg%3E");
			-webkit-mask-image: var(--icon);
			mask-image: var(--icon);
		}

		#fediring-next .icon {
			--icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12'%3E%3Cpath d='M1 6h10M7 2l4 4-4 4' style='fill:none;stroke:%23000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round'/%3E%3C/svg%3E");
			-webkit-mask-image: var(--icon);
			mask-image: var(--icon);
		}
	}
}
