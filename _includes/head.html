<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="{{ site.primary-color }}"><!-- primary color -->

  <title>{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}</title>

  <link rel="canonical" href="{{ page.url | replace:'index.html','' | prepend: site.baseurl | prepend: site.url }}" />
  <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ "/feed.xml" | prepend: site.baseurl | prepend: site.url }}" />

  <link rel="stylesheet" href="{{ "/style.css" | prepend: site.baseurl }}" />
  
  <link rel="icon" type="image/gif" href="{{ "/favicon.gif" | prepend: site.baseurl }}" />
  <link rel="apple-touch-icon" sizes="180x180" href="{{ "/apple-touch-icon.png" | prepend: site.baseurl }}" />

  <!-- Open Graph -->
  <meta property="og:title" content="{{ site.title }}" />
  <meta property="og:url" content="{{ site.url }}" />
  <meta property="og:description" content="{{ site.description }}" />
  <meta property="og:image" content="{{ "/assets/card.png" | prepend: site.baseurl | prepend: site.url }}" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="400" />
  <meta property="og:image:alt" content="A card with Daudix UFO written on it" />

  <!-- Plausible -->
  <script defer data-domain="daudix-ufo.codeberg.page" src="https://analytics.projectsegfau.lt/js/script.js"></script>

  <!-- Navigation -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const nav = document.querySelector(".nav");
      const supportPageOffset = window.pageXOffset !== undefined;
      const isCSS1Compat = (document.compatMode || "") === "CSS1Compat";

      let previousScrollPosition = 0;

      const isScrollingDown = () => {
        const scrolledPosition = supportPageOffset
          ? window.pageYOffset
          : isCSS1Compat
            ? document.documentElement.scrollTop
            : document.body.scrollTop;

        return scrolledPosition > previousScrollPosition;
      };

      const handleNavScroll = () => {
        const scrolledPosition = supportPageOffset
          ? window.pageYOffset
          : isCSS1Compat
            ? document.documentElement.scrollTop
            : document.body.scrollTop;

        if (isScrollingDown() && !nav.contains(document.activeElement)) {
          nav.classList.add("scroll-down");
          nav.classList.remove("scroll-up");
        } else {
          nav.classList.add("scroll-up");
          nav.classList.remove("scroll-down");
        }

        // Apply effects based on the scrolled position
        if (scrolledPosition > 20) {
          nav.style.backdropFilter = "blur(32px) saturate(180%)";
          nav.style.boxShadow = "0 0 0 1px rgba(0, 0, 0, 0.03), 0 1px 3px 1px rgba(0, 0, 0, 0.07), 0 2px 6px 2px rgba(0, 0, 0, 0.03)";
        } else {
          nav.style.backdropFilter = "none";
          nav.style.boxShadow = "none";
        }

        previousScrollPosition = scrolledPosition;
      };

      var throttleTimer;

      const throttle = (callback, time) => {
        if (throttleTimer) return;

        throttleTimer = true;
        setTimeout(() => {
          callback();
          throttleTimer = false;
        }, time);
      };

      const mediaQuery = window.matchMedia("(prefers-reduced-motion: reduce)");

      window.addEventListener("scroll", () => {
        if (mediaQuery && !mediaQuery.matches) {
          throttle(handleNavScroll, 100);
        }
      });
    });
  </script>
</head>
